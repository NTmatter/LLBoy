TODO: move system tests into this directory, calling functions from compiled library where possible.